<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Playlists Generadas</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: #96BC33;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    #container {
      background-color: #fff;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      text-align: center;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }

    #logo {
      margin-bottom: 20px;
      width: 250px;
    }

    .playlist-item {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
<img id="logo" src="logo.jpg" alt="logo">
  <div id="container">
    <h1>Playlists Generadas</h1>
    <div id="playlists"></div>
  </div>
  <script>
    const clientId = 'd7cdacc29b064ae5984e5ca69d5f42e9';
    const clientSecret = '567a2ba4f0c843faad2fdb94b7d375e9';
    const genreSeeds = ['rock', 'pop', 'hip-hop', 'metal', 'jazz', 'reggaeton'];

    function generatePlaylists() {
      fetchAccessToken()
        .then(access_token => {
          const playlistPromises = genreSeeds.map(genre => generatePlaylist(access_token, genre));
          Promise.all(playlistPromises)
            .then(playlists => {
              const playlistsContainer = document.getElementById('playlists');
              playlists.forEach(playlist => {
                const playlistElement = document.createElement('div');
                playlistElement.className = 'playlist-item';
                playlistElement.innerHTML = `
                  <p>${playlist.name}</p>
                  <iframe src="https://open.spotify.com/embed/track/${playlist.trackId}" width="300" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
                `;
                playlistsContainer.appendChild(playlistElement);
              });
            })
            .catch(error => {
              console.error('Error al obtener las playlists:', error);
            });
        })
        .catch(error => {
          console.error('Error al obtener el access token:', error);
        });
    }

    function fetchAccessToken() {
      const url = 'https://accounts.spotify.com/api/token';
      const data = new URLSearchParams();
      data.append('grant_type', 'client_credentials');

      return fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': 'Basic ' + btoa(clientId + ':' + clientSecret)
        },
        body: data
      })
        .then(response => response.json())
        .then(data => data.access_token);
    }

    function generatePlaylist(access_token, genre) {
      const url = `https://api.spotify.com/v1/recommendations?limit=1&seed_genres=${genre}`;
      const headers = {
        'Authorization': 'Bearer ' + access_token
      };

      return fetch(url, {
        headers: headers
      })
        .then(response => response.json())
        .then(data => {
          const track = data.tracks[0];
          return {
            name: `Canci√≥n de ${genre}`,
            trackId: track.id
          };
        });
    }

    generatePlaylists();
  </script>
</body>
</html>

